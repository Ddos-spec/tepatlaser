---
// index.astro - Halaman utama website laser cutting
import BaseLayout from '../components/BaseLayout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import Hero from '../components/Hero.astro';
import CTA from '../components/CTA.astro';
import { SERVICES, MATERIALS, TESTIMONIALS, PORTFOLIO, FAQ, SITE_CONFIG } from '../utils/constants.js';
import { generateMetaTags, generateFAQSchema, generateReviewSchema } from '../utils/seo.js';

// SEO Meta Tags - Dioptimalkan untuk Jabodetabek
const metaTags = generateMetaTags({
  title: "Jasa Laser Cutting Akurat & Cepat #1 Jabodetabek - Akrilik, Kayu, Metal",
  description: "Laser cutting presisi tinggi & pengerjaan cepat di Jabodetabek! Spesialis akrilik, kayu, metal dengan teknologi terdepan. 10+ tahun pengalaman, hasil akurat, garansi kualitas. Melayani Jakarta, Bogor, Depok, Tangerang, Bekasi.",
  keywords: "jasa laser cutting jakarta, laser cutting bogor, laser cutting depok, laser cutting tangerang, laser cutting bekasi, cnc router jabodetabek, laser fiber cutting, potong akrilik jakarta, potong kayu bogor, cutting metal depok, laser engraving tangerang, galvo engraving bekasi",
  url: "/",
  type: "website",
  image: "/tepatlaser/hero-laser.webp",
  publishedTime: "2024-01-01T00:00:00Z",
  modifiedTime: "2024-01-01T00:00:00Z",
  author: SITE_CONFIG.author
});

// Structured Data
const faqSchema = generateFAQSchema(FAQ);
const reviewSchema = generateReviewSchema(TESTIMONIALS);
---

<BaseLayout 
  title={metaTags.title}
  description={metaTags.description}
  keywords={metaTags.keywords}
  url={metaTags.canonical}
  jsonLd={[faqSchema, reviewSchema]}
>
  <Header slot="header" />
  
  <Hero />
  
  <section id="services" class="section-padding bg-white">
    <div class="container-custom">
      <div class="text-center mb-16">
        <h2 class="heading-lg text-gray-900 mb-6">Layanan Laser Cutting Profesional</h2>
        <p class="text-xl text-gray-600 max-w-3xl mx-auto">
          Teknologi terdepan dengan presisi tinggi untuk semua kebutuhan industri dan kreatif Anda.
          Dari prototyping hingga produksi massal, kami siap memberikan solusi terbaik.
        </p>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
        {SERVICES.map((service, index) => (
          <div class="group bg-white rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 border border-gray-100">
            <div class="relative overflow-hidden rounded-t-xl">
              <img 
                src={service.image}
                alt={service.name}
                class="w-full h-48 object-cover group-hover:scale-110 transition-transform duration-300"
                loading="lazy"
                width="400"
                height="300"
              />
              <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
            </div>
            
            <div class="p-6">
              <h3 class="text-xl font-bold text-gray-900 mb-3 group-hover:text-blue-600 transition-colors duration-300">
                {service.name}
              </h3>
              
              <p class="text-gray-600 mb-4 leading-relaxed">
                {service.description}
              </p>
              
              <div class="space-y-2 mb-6">
                {service.features.map((feature) => (
                  <div class="flex items-center space-x-2">
                    <svg class="w-4 h-4 text-green-500 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                    </svg>
                    <span class="text-sm text-gray-700">{feature}</span>
                  </div>
                ))}
              </div>
          
              <div class="space-y-3">
                <a 
                  href={`https://wa.me/${SITE_CONFIG.whatsapp}?text=${encodeURIComponent(`Halo, saya tertarik dengan ${service.name}. Bisa konsultasi gratis tentang kebutuhan project saya?`)}`}
                  target="_blank"
                  rel="noopener noreferrer"
                  class="btn-primary text-sm px-4 py-3 w-full text-center flex items-center justify-center space-x-2 bg-green-600 hover:bg-green-700 transition-colors duration-300"
                >
                  <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.890-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.785"/>
                  </svg>
                  <span>Konsultasi Gratis via WA</span>
                </a>
                
                <a 
                  href={`/${service.slug}`}
                  class="btn-secondary text-sm px-4 py-2 w-full text-center"
                >
                  Detail Layanan
                </a>
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>
  
  <section id="materials" class="section-padding bg-gray-50">
    <div class="container-custom">
      <div class="text-center mb-16">
        <h2 class="heading-lg text-gray-900 mb-6">Material yang Kami Layani</h2>
        <p class="text-xl text-gray-600 max-w-3xl mx-auto">
          Berbagai jenis material dengan kualitas terbaik dan hasil cutting yang presisi.
          Konsultasikan material Anda dengan tim ahli kami untuk mendapatkan hasil optimal.
        </p>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
        {MATERIALS.map((material) => (
          <div class="bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden group">
            <div class="relative">
              <img 
                src={material.image}
                alt={material.name}
                class="w-full h-40 object-cover group-hover:scale-105 transition-transform duration-300"
                loading="lazy"
                width="400"
                height="200"
              />
              <div class="absolute top-4 right-4 bg-blue-600 text-white px-3 py-1 rounded-full text-sm font-medium">
                {material.thickness}
              </div>
            </div>
            
            <div class="p-6">
              <h3 class="text-lg font-bold text-gray-900 mb-3">{material.name}</h3>
              <p class="text-gray-600 mb-4 text-sm leading-relaxed">{material.description}</p>
              
              <div class="space-y-2 mb-4">
                <h4 class="text-sm font-semibold text-gray-800">Aplikasi:</h4>
                <div class="flex flex-wrap gap-2">
                  {material.applications.map((app) => (
                    <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-md text-xs font-medium">
                      {app}
                    </span>
                  ))}
                </div>
              </div>
              
              <a 
                href={`/${material.slug}`}
                class="btn-secondary text-sm px-4 py-2 w-full text-center"
              >
                Lihat Detail
              </a>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>
  
  <section id="portfolio" class="section-padding bg-white">
    <div class="container-custom">
      <div class="text-center mb-16">
        <h2 class="heading-lg text-gray-900 mb-6">Portfolio Proyek Terbaik</h2>
        <p class="text-xl text-gray-600 max-w-3xl mx-auto">
          Lihat hasil karya terbaik kami yang telah dipercaya oleh berbagai industri.
          Setiap proyek dikerjakan dengan standar kualitas tinggi dan presisi sempurna.
        </p>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
        {PORTFOLIO.map((project) => (
          <div class="group relative overflow-hidden rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300">
            <img 
              src={project.image}
              alt={project.title}
              class="w-full h-64 object-cover group-hover:scale-110 transition-transform duration-500"
              loading="lazy"
              width="400"
              height="300"
            />
            
            <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
 
            <div class="absolute bottom-0 left-0 right-0 p-6 text-white transform translate-y-full group-hover:translate-y-0 transition-transform duration-300">
              <span class="inline-block bg-blue-600 px-3 py-1 rounded-full text-xs font-medium mb-2">
                {project.category}
              </span>
              
              <h3 class="text-lg font-bold mb-2">{project.title}</h3>
              <p class="text-sm text-gray-200 mb-3">{project.description}</p>
              <div class="flex items-center justify-between text-xs">
                <span class="bg-white/20 px-2 py-1 rounded">{project.material}</span>
                <span class="bg-white/20 px-2 py-1 rounded">{project.service}</span>
              </div>
            </div>
          </div>
        ))}
      </div>
      
      <div class="text-center mt-12">
        <a 
          href="/tepatlaser/portfolio"
          class="btn-primary text-lg px-8 py-3"
        >
          Lihat Semua Portfolio
        </a>
      </div>
    </div>
  </section>
  
  <section id="testimonials" class="section-padding bg-gray-50">
    <div class="container-custom">
      <div class="text-center mb-16">
        <h2 class="heading-lg text-gray-900 mb-6">Apa Kata Klien Kami</h2>
        <p class="text-xl text-gray-600 max-w-3xl mx-auto">
          Kepuasan klien adalah prioritas utama kami.
          Dengarkan pengalaman mereka yang telah mempercayakan proyek laser cutting kepada LaserCut Pro.
        </p>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        {TESTIMONIALS.map((testimonial) => (
          <div class="bg-white rounded-xl shadow-lg p-8 relative">
            <div class="absolute top-6 right-6 text-blue-100">
              <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24">
                <path d="M14.017 21v-7.391c0-5.704 3.731-9.57 8.983-10.609l.995 2.151c-2.432.917-3.995 3.638-3.995 5.849h4v10h-9.983zm-14.017 0v-7.391c0-5.704 3.748-9.57 9-10.609l.996 2.151c-2.433.917-3.996 3.638-3.996 5.849h4v10h-10z"/>
              </svg>
            </div>
            
            <div class="flex items-center mb-4">
              {Array.from({ length: testimonial.rating }, (_, i) => (
                <svg class="w-5 h-5 text-yellow-400" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                </svg>
              ))}
            </div>
            
            <p class="text-gray-700 mb-6 leading-relaxed italic">
              "{testimonial.content}"
            </p>
            
            <div class="flex items-center">
              <img 
                src={testimonial.image}
                alt={testimonial.name}
                class="w-12 h-12 rounded-full object-cover mr-4"
                loading="lazy"
                width="48"
                height="48"
              />
              <div>
                <h4 class="font-bold text-gray-900">{testimonial.name}</h4>
                <p class="text-sm text-gray-600">{testimonial.position}</p>
                <p class="text-sm text-blue-600 font-medium">{testimonial.company}</p>
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>
  
  <section id="faq" class="section-padding bg-white">
    <div class="container-custom">
      <div class="text-center mb-16">
        <h2 class="heading-lg text-gray-900 mb-6">Pertanyaan yang Sering Diajukan</h2>
        <p class="text-xl text-gray-600 max-w-3xl mx-auto">
          Temukan jawaban untuk pertanyaan umum tentang layanan laser cutting kami.
          Masih ada pertanyaan? Jangan ragu untuk menghubungi tim kami.
        </p>
      </div>
      
      <div class="max-w-4xl mx-auto">
        <div class="space-y-6">
          {FAQ.map((faq, index) => (
            <div class="bg-gray-50 rounded-xl p-6 hover:bg-gray-100 transition-colors duration-300">
              <button 
                class="flex items-center justify-between w-full text-left"
                data-faq-index={index}
              >
                <h3 class="text-lg font-semibold text-gray-900 pr-4">
                  {faq.question}
                </h3>
                <svg 
                  class="w-6 h-6 text-gray-500 transform transition-transform duration-300"
                  id={`faq-icon-${index}`}
                  fill="none" 
                  stroke="currentColor" 
                  viewBox="0 0 24 24"
                >
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
              </button>
              
              <div 
                class="mt-4 text-gray-700 leading-relaxed hidden"
                id={`faq-answer-${index}`}
              >
                {faq.answer}
              </div>
            </div>
          ))}
        </div>
      </div>
    </div>
  </section>
  
  <CTA 
    title="Siap Memulai Proyek Laser Cutting Anda?"
    description="Dapatkan konsultasi gratis dan quote terbaik untuk kebutuhan laser cutting Anda. Tim ahli kami siap membantu mewujudkan ide kreatif Anda."
    variant="gradient"
    size="lg"
  />
  
  <Footer slot="footer" />
</BaseLayout>

<script>
  // FAQ Toggle Functionality
  function toggleFAQ(index: number): void {
    const answer = document.getElementById(`faq-answer-${index}`);
    const icon = document.getElementById(`faq-icon-${index}`);
    
    if (answer && icon) {
      if (answer.classList.contains('hidden')) {
        answer.classList.remove('hidden');
        icon.style.transform = 'rotate(180deg)';
      } else {
        answer.classList.add('hidden');
        icon.style.transform = 'rotate(0deg)';
      }
    }
  }
  
  // Event delegation for FAQ buttons
  document.addEventListener('DOMContentLoaded', () => {
    const faqButtons = document.querySelectorAll('[data-faq-index]');
    faqButtons.forEach(button => {
      button.addEventListener('click', (e) => {
        const index = parseInt((e.currentTarget as HTMLElement).getAttribute('data-faq-index') || '0');
        toggleFAQ(index);
      });
    });
    
    // Smooth scroll for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href') || '');
        if (target) {
          target.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
        }
      });
    });
    
    // Intersection Observer for animations
    const observerOptions = {
      threshold: 0.1,
      rootMargin: '0px 0px -50px 0px'
    };
    
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('animate-fade-in-up');
        }
      });
    }, observerOptions);
    
    // Observe all sections
    document.querySelectorAll('section').forEach(section => {
      observer.observe(section);
    });
  });
</script>

<style>
  /* Animation classes */
  .animate-fade-in-up {
    animation: fadeInUp 0.8s ease-out forwards;
  }
  
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  /* Smooth transitions */
  * {
    transition-property: transform, opacity, background-color, border-color, color, fill, stroke;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  }
</style>